args:
- description: Password for the Archer instance.
  name: password
  required: true
- description: Instance name for the Archer instance.
  name: instance_name
  required: true
- description: Username name for the Archer instance.
  name: username
  required: true
- description: Server URL name for the Archer instance.
  name: server_url
  required: true
comment: Checks whether given Archer credentials are valid
commonfields:
  id: CheckArcherInstance
  version: -1
dockerimage: demisto/archer:1.0.0.270
enabled: true
name: CheckArcherInstance
runas: DBotWeakRole
runonce: false
script: |-
  import rsa_archer.archer_instance as arc

  args = demisto.args()
  password = args["password"]
  instance_name = args["instance_name"]
  username = args["username"]
  server_url = args["server_url"]

  def new_log(s, s2):
      raise Exception(s % s2)

  arc.log.error = new_log

  try:
      archer_instance = arc.ArcherInstance(server_url, instance_name, username, password)
      demisto.results("Success - your credentials are valid")
  except Exception as e:
      return_error("Your credentials are invalid.\n Error from Archer: {}".format(str(e)))
scripttarget: 0
system: true
tags: []
type: python
